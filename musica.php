<?php session_start(); ?>
<!DOCTYPE html>
<html>
<head>
	<title></title>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Traveling-App</title>
	<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
	<link href="css/main.css" rel="stylesheet">
    <link href="img/*" rel="shortcut icon" type="image/png">
	<link rel="stylesheet" type="text/css" href="css/musica.css">
	<link rel="stylesheet" type="text/css" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<?php include 'header.php'; ?>
        <div class="layer">
                                <div class="musicaplayersection">
				    <div class="player">
						<div class="main">
							<audio></audio>
							<div class="thumbnail">
								<img src="">
							</div>
							<div class="seekbar">
								<input type="range">
							</div>
							<div class="details">
								<h2></h2>
								<p></p>
							</div>
							<div class="controls">
								<div class="prev-control">
									<i class="fa fa-backward"></i>
								</div>
								<div class="play-pause-control paused">
									<i class="fa fa-play"></i>
									<i class="fa fa-pause"></i>
								</div>
								<div class="next-control">
									<i class="fa fa-forward"></i>
								</div>
							</div>
						</div>
						<div class="player-list">
							<div class="toggle-list">
								<i class="fa fa-angle-up"></i>
								<i class="fa fa-angle-down"></i>
							</div>
							<div class="list">
							</div>
						</div>
					</div>	
				</div>
				<div class="block">
					<h2>
						NordicMann is a music way to describe vikings and scandinavian culture
					</h2>
				</div>
		</div>

        <section class="music-section">
		<div class="musica-wrapper">
			<div class="boxed">
				<div class="boxed-content">
					<!-- Music song name--->
					<h2>Name fo song</h2>
					<img src="https://unsplash.it/400">
					<div class="song-box">
						Song - box
					</div>
					<p class="descr">Description: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				</div>
			</div>
			<div class="boxed">
				<div class="boxed-content">
					<!-- Music song name--->
					<h2>Name fo song</h2>
					<img src="https://unsplash.it/400">
					<div class="song-box">
						Song - box
					</div>
					<p class="descr">Description: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				</div>
			</div>
			<div class="boxed">
				<div class="boxed-content">
					<!-- Music song name--->
					<h2>Name fo song</h2>
					<img src="https://unsplash.it/400">
					<div class="song-box">
						Song - box
					</div>
					<p class="descr">Description: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				</div>
			</div>
			<div class="boxed">
				<div class="boxed-content">
					<!-- Music song name--->
					<h2>Name fo song</h2>
					<img src="https://unsplash.it/400">
					<div class="song-box">
						Song - box
					</div>
					<p class="descr">Description: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				</div>
			</div>
			<div class="boxed">
				<div class="boxed-content">
					<!-- Music song name--->
					<h2>Name fo song</h2>
					<img src="https://unsplash.it/400">
					<div class="song-box">
						Song - box
					</div>
					<p class="descr">Description: Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
				</div>
			</div>
		</div>
	</section>

	<section class="footer">
		<div class="footer-content">
			<div class="boxing">
				<ul>
					<li>Home</li>
					<li>Music</li>
					<li>Poetry</li>
					<li>Register</li>
				</ul>
			</div>
			<div class="boxing">
				<ul>
					<li>Sign in</li>
					<li>Donation</li>
				</ul>
			</div>
			<div class="boxing">
				<ul>
					<li>About us</li>
					<li>Contact us</li>
					<li>Location</li>
				</ul>
			</div>
			<div class="boxing">
				<ul>
					<li><i class="fa-3x fa fa-twitter"></i></li>
					<li class="fa-3x fa fa-youtube"></li>
					<li><i class="fa-3x fa fa-bandcamp"></i></li>
				</ul>
			</div>
		</div>
	</section>
	<script type="text/javascript">
		function _(query){
			return document.querySelector(query);
		}
		function _all(query){
			return document.querySelectorAll(query);
		}
		let songList = [
			{
				thumbnail:"first.jpg",
				audio:"test.mp3",
				songname:"Bright Future",
				artistname:"Silent Partner"
			},
			{
				thumbnail:"Bovi.jpg",
				audio:"Bovi.mp3",
				songname:"Bovi",
				artistname:"The Grand Affair",
			},
			{
				thumbnail:"Sunny_Looks_Good_on_You.jpg",
				audio:"Sunny_Looks_Good_on_You.mp3",
				songname:"Sunny Looks Good on You",
				artistname:"Midnight North",
			},
			{
				thumbnail:"Bright_Eyed_Blues.jpg",
				audio:"Bright_Eyed_Blues.mp3",
				songname:"Bright Eyed Blues",
				artistname:"Unicorn Heads",
			},
			{
				thumbnail:"How_it_Began.jpg",
				audio:"How_it_Began.mp3",
				songname:"How it Began",
				artistname:"Silent Partner",
			},
			{
				thumbnail:"Simon_s_Song.jpg",
				audio:"Simon_s_Song.mp3",
				songname:"Simon's Song",
				artistname:"Dan Lebowitz",
			},
			{
				thumbnail:"Scanline.jpg",
				audio:"Scanline.mp3",
				songname:"Scanline",
				artistname:"Mike Relm",
			},
			{
				thumbnail:"Flight_To_Tunisia.jpg",
				audio:"Flight_To_Tunisia.mp3",
				songname:"Flight To Tunisia",
				artistname:"Causmic",
			},
			{
				thumbnail:"Calimba.jpg",
				audio:"Calimba.mp3",
				songname:"Calimba",
				artistname:"E's Jammy Jams",
			},
			{
				thumbnail:"Everglow.jpg",
				audio:"Everglow.mp3",
				songname:"Everglow",
				artistname:"Patrick Patrikios",
			}
		];
		 
		let currentSongIndex = 0;
		 
		let player = _(".player"),
			toggleSongList = _(".player .toggle-list");
		 
		let main = {
			audio:_(".player .main audio"),
			thumbnail:_(".player .main img"),
			seekbar:_(".player .main input"),
			songname:_(".player .main .details h2"),
			artistname:_(".player .main .details p"),
			prevControl:_(".player .main .controls .prev-control"),
			playPauseControl:_(".player .main .controls .play-pause-control"),
			nextControl:_(".player .main .controls .next-control")
		}
		 
		toggleSongList.addEventListener("click", function(){
			toggleSongList.classList.toggle("active");
			player.classList.toggle("activeSongList");
		});
		 
		_(".player .player-list .list").innerHTML = (songList.map(function(song,songIndex){
			return `
				<div class="item" songIndex="${songIndex}">
					<div class="thumbnail">
						<img src="./img/${song.thumbnail}">
					</div>
					<div class="details">
						<h2>${song.songname}</h2>
						<p>${song.artistname}</p>
					</div>
				</div>
			`;
		}).join(""));
		 
		let songListItems = _all(".player .player-list .list .item");
		for(let i=0;i<songListItems.length;i++){
			songListItems[i].addEventListener("click",function(){
				currentSongIndex = parseInt(songListItems[i].getAttribute("songIndex"));
				loadSong(currentSongIndex);
				player.classList.remove("activeSongList");
			});
		}
		 
		function loadSong(songIndex){
			let song = songList[songIndex];
			main.thumbnail.setAttribute("src","./img/"+song.thumbnail);
			document.body.style.background = `linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.8)), url("./files/${song.thumbnail}") center no-repeat`;
			document.body.style.backgroundSize = "cover";	
			main.songname.innerText = song.songname;
			main.artistname.innerText = song.artistname;
			main.audio.setAttribute("src","./audio/"+song.audio);
			main.seekbar.setAttribute("value",0);
			main.seekbar.setAttribute("min",0);
			main.seekbar.setAttribute("max",0);
			main.audio.addEventListener("canplay",function(){
				main.audio.play();
				if(!main.audio.paused){
					main.playPauseControl.classList.remove("paused");
				}
				main.seekbar.setAttribute("max",parseInt(main.audio.duration));
				main.audio.onended = function(){
					main.nextControl.click();
				}
			})
		}
		setInterval(function(){
			main.seekbar.value = parseInt(main.audio.currentTime);
		},1000);
		 
		main.prevControl.addEventListener("click",function(){
			currentSongIndex--;
			if(currentSongIndex < 0){
				currentSongIndex = songList.length + currentSongIndex;
			}
			loadSong(currentSongIndex);
		});
		main.nextControl.addEventListener("click",function(){
			currentSongIndex = (currentSongIndex+1) % songList.length;
			loadSong(currentSongIndex);
		});
		main.playPauseControl.addEventListener("click",function(){
			if(main.audio.paused){
				main.playPauseControl.classList.remove("paused");
				main.audio.play();
			} else {
				main.playPauseControl.classList.add("paused");
				main.audio.pause();
			}
		});
		main.seekbar.addEventListener("change",function(){
			main.audio.currentTime = main.seekbar.value;
		});
		loadSong(currentSongIndex);
	</script>
<?php include 'footer.php'; ?>
